<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>직원 급여 관리</title>
    <link rel="stylesheet" href="../../../../../../../resources/static/css/branch/storemangement/specification/globals.css" />
    <link rel="stylesheet" href="../../../../../../../resources/static/css/branch/storemangement/specification/styleguide.css" />
    <link rel="stylesheet" href="../../../../../../../resources/static/css/branch/storemangement/specification/style.css" />
</head>

<body>
    <main class="frame">
        <section class="content">
            <header class="header">
                <div class="date">
                    <button class="button" aria-label="날짜 선택">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M16.666 2.50004H15.8327V1.66671C15.8327 1.20837 15.4577 0.833374 14.9993 0.833374C14.541 0.833374 14.166 1.20837 14.166 1.66671V2.50004H5.83268V1.66671C5.83268 1.20837 5.45768 0.833374 4.99935 0.833374C4.54102 0.833374 4.16602 1.20837 4.16602 1.66671V2.50004H3.33268C2.41602 2.50004 1.66602 3.25004 1.66602 4.16671V17.5C1.66602 18.4167 2.41602 19.1667 3.33268 19.1667H16.666C17.5827 19.1667 18.3327 18.4167 18.3327 17.5V4.16671C18.3327 3.25004 17.5827 2.50004 16.666 2.50004ZM15.8327 17.5H4.16602C3.70768 17.5 3.33268 17.125 3.33268 16.6667V6.66671H16.666V16.6667C16.666 17.125 16.291 17.5 15.8327 17.5Z"
                                fill="#969696" />
                        </svg>

                        <span class="text">2025년 1월</span>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M6.17806 9.48454L9.18389 12.4904C9.63651 12.943 10.3677 12.943 10.8203 12.4904L13.8261 9.48454C14.5572 8.7534 14.035 7.5 13.0021 7.5H6.99045C5.95756 7.5 5.44691 8.7534 6.17806 9.48454Z"
                                fill="#969696" />
                        </svg>

                    </button>
                </div>
                <div class="input">
                    <label for="product-name" class="product-name">품명</label>
                    <input type="text" id="product-name" name="product-name" class="product-name-input"
                        aria-label="품명 입력" />
                </div>
            </header>
            <table class="table-container">
                <thead>
                    <tr>
                        <th>수급 상태</th>
                        <th>결제 번호</th>
                        <th>이름</th>
                        <th>명세 등록일</th>
                        <th>직무</th>
                        <th>담당자</th>
                        <th>이메일</th>
                        <th>월급</th>
                        <th>전화번호</th>
                        <th>성별</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><button class="pay-button">수급 완료</button></td>
                        <td>1111</td>
                        <td>최예찬</td>
                        <td>2025-03-20</td>
                        <td>관리자</td>
                        <td>황인태</td>
                        <td>qbsb147@naver.com</td>
                        <td>3000000원</td>
                        <td>010-6640-8235</td>
                        <td>남</td>
                    </tr>
                    <tr>
                        <td><button class="needpay-button">수급</button></td>
                        <td>1111</td>
                        <td>최예찬</td>
                        <td>2025-03-20</td>
                        <td>관리자</td>
                        <td>황인태</td>
                        <td>qbsb147@naver.com</td>
                        <td>3000000원</td>
                        <td>010-6640-8235</td>
                        <td>남</td>
                    </tr>
                    <tr>
                        <td><button class="needpay-button">수급</button></td>
                        <td>1111</td>
                        <td>최예찬</td>
                        <td>2025-03-20</td>
                        <td>관리자</td>
                        <td>황인태</td>
                        <td>qbsb147@naver.com</td>
                        <td>3000000원</td>
                        <td>010-6640-8235</td>
                        <td>남</td>
                    </tr>
                    <tr>
                        <td><button class="needpay-button">수급</button></td>
                        <td>1111</td>
                        <td>최예찬</td>
                        <td>2025-03-20</td>
                        <td>관리자</td>
                        <td>황인태</td>
                        <td>qbsb147@naver.com</td>
                        <td>3000000원</td>
                        <td>010-6640-8235</td>
                        <td>남</td>
                    </tr>
                    <tr>
                        <td><button class="needpay-button">수급</button></td>
                        <td>1111</td>
                        <td>최예찬</td>
                        <td>2025-03-20</td>
                        <td>관리자</td>
                        <td>황인태</td>
                        <td>qbsb147@naver.com</td>
                        <td>3000000원</td>
                        <td>010-6640-8235</td>
                        <td>남</td>
                    </tr>
                    <tr>
                        <td><button class="needpay-button">수급</button></td>
                        <td>1111</td>
                        <td>최예찬</td>
                        <td>2025-03-20</td>
                        <td>관리자</td>
                        <td>황인태</td>
                        <td>qbsb147@naver.com</td>
                        <td>3000000원</td>
                        <td>010-6640-8235</td>
                        <td>남</td>
                    </tr>
                    <tr>
                        <td><button class="pay-button">수급 완료</button></td>
                        <td>1111</td>
                        <td>최예찬</td>
                        <td>2025-03-20</td>
                        <td>관리자</td>
                        <td>황인태</td>
                        <td>qbsb147@naver.com</td>
                        <td>3000000원</td>
                        <td>010-6640-8235</td>
                        <td>남</td>
                    </tr>
                    <tr>
                        <td><button class="pay-button">수급 완료</button></td>
                        <td>1111</td>
                        <td>최예찬</td>
                        <td>2025-03-20</td>
                        <td>관리자</td>
                        <td>황인태</td>
                        <td>qbsb147@naver.com</td>
                        <td>3000000원</td>
                        <td>010-6640-8235</td>
                        <td>남</td>
                    </tr>
                    <tr>
                        <td><button class="pay-button">수급 완료</button></td>
                        <td>1111</td>
                        <td>최예찬</td>
                        <td>2025-03-20</td>
                        <td>관리자</td>
                        <td>황인태</td>
                        <td>qbsb147@naver.com</td>
                        <td>3000000원</td>
                        <td>010-6640-8235</td>
                        <td>남</td>
                    </tr>
                    <tr>
                        <td><button class="pay-button">수급 완료</button></td>
                        <td>1111</td>
                        <td>최예찬</td>
                        <td>2025-03-20</td>
                        <td>관리자</td>
                        <td>황인태</td>
                        <td>qbsb147@naver.com</td>
                        <td>3000000원</td>
                        <td>010-6640-8235</td>
                        <td>남</td>
                    </tr>
                    <tr>
                        <td><button class="pay-button">수급 완료</button></td>
                        <td>1111</td>
                        <td>최예찬</td>
                        <td>2025-03-20</td>
                        <td>관리자</td>
                        <td>황인태</td>
                        <td>qbsb147@naver.com</td>
                        <td>3000000원</td>
                        <td>010-6640-8235</td>
                        <td>남</td>
                    </tr>
                </tbody>
            </table>

        </section>
        <nav class="pagination" aria-label="페이지 네비게이션">
            <button class="pre-page" aria-label="이전 페이지">
                <svg width="29" height="26" viewBox="0 0 29 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M19.9226 22.4738C20.6925 21.7753 20.6925 20.6469 19.9226 19.9484L12.2627 12.9989L19.9226 6.04936C20.6925 5.35083 20.6925 4.22243 19.9226 3.5239C19.1526 2.82537 17.9089 2.82537 17.139 3.5239L8.07745 11.7451C7.30752 12.4436 7.30752 13.572 8.07745 14.2706L17.139 22.4918C17.8891 23.1724 19.1526 23.1724 19.9226 22.4738Z" fill="black"/>
                    </svg>
            </button>
            <button class="page" aria-label="1 페이지"><span class="text-wrapper-7">1</span></button>
            <button class="page" aria-label="2 페이지"><span class="text-wrapper-7">2</span></button>
            <button class="div-wrapper" aria-label="3 페이지, 현재 페이지"><span class="text-wrapper-8">3</span></button>
            <button class="page" aria-label="4 페이지"><span class="text-wrapper-7">4</span></button>
            <button class="page" aria-label="5 페이지"><span class="text-wrapper-7">5</span></button>
            <button class="page" aria-label="6 페이지"><span class="text-wrapper-7">6</span></button>
            <button class="page" aria-label="7 페이지"><span class="text-wrapper-7">7</span></button>
            <button class="page" aria-label="8 페이지"><span class="text-wrapper-7">8</span></button>
            <button class="page" aria-label="9 페이지"><span class="text-wrapper-7">9</span></button>
            <button class="page" aria-label="10 페이지"><span class="text-wrapper-9">10</span></button>
            <button class="pre-page" aria-label="다음 페이지">
                <svg width="29" height="26" viewBox="0 0 29 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.07745 3.52616C7.30752 4.22469 7.30752 5.35309 8.07745 6.05163L15.7373 13.0011L8.07745 19.9506C7.30752 20.6492 7.30752 21.7776 8.07745 22.4761C8.84738 23.1746 10.0911 23.1746 10.861 22.4761L19.9226 14.2549C20.6925 13.5564 20.6925 12.428 19.9226 11.7294L10.861 3.50825C10.1109 2.82763 8.84738 2.82763 8.07745 3.52616Z" fill="black"/>
                    </svg>
                    
            </button>
        </nav>
    </main>
</body>

</html>



document.getElementById("employeeForm").addEventListener("submit", function(event) {
event.preventDefault();

const userNameInput = document.getElementById("user-name");
let userName = userNameInput.value.trim();
if (!userName) {
alert("직원 이름을 입력하세요.");
return;
}

let encodedUserName = encodeURIComponent(userName);
let requestUrl = "/branch/storemangement/specification/table/searchByName?userName=" + encodedUserName;

fetch(requestUrl, {
method: "GET",
headers: { "Content-Type": "application/json" }
})
.then(response => {
if (!response.ok) {
throw new Error(`검색 실패: ${response.status}`);
}
return response.json();
})
.then(data => {
renderEmployeeList(data); // 검색된 직원 목록 렌더링
})
.catch(error => console.error("Error:", error));
});

function renderEmployeeList(employees) {
const tableBody = document.getElementById("employeeTable");

if (!tableBody) {
console.error("🚨 employeeTable 요소가 존재하지 않습니다!");
return;
}

tableBody.innerHTML = ""; // 기존 데이터 초기화

employees.forEach(employee => {
console.log("📢 직원 데이터 확인:", employee);
console.log("📢 positionName 확인:", employee.positionName);
console.log("📢 salary 값:", employee.salary);

console.log("📢 salary 값:", employee.salary);
console.log("📢 salary 타입 확인:", typeof employee.salary, employee.salary);

console.log("📢 innerHTML로 들어가는 값:", `
<td>${employee.salary}</td>
`);


const statusText = (!employee.status || employee.status.trim() === "") ? "수급" : employee.status;
const buttonClass = (statusText === "수급 완료") ? "pay-button" : "needpay-button";

const userNameValue = employee.userName ?? "없음"; // undefined, null 방지
const enrollDate = employee.enrollDate ?? "❌ 없음";
const positionName = employee.positionName ?? "❌ 없음";
const headName = employee.headName ?? "❌ 없음";
const email = employee.email ?? "❌ 없음";
const salary = employee.salary ? `${employee.salary.toLocaleString()}원` : "❌ 없음";
const phone = employee.phone ?? "❌ 없음";
const gender = employee.gender ?? "❌ 없음";

// 행 (tr) 생성
const row = document.createElement("tr");

// 버튼 (수급 상태)
const button = document.createElement("button");
button.className = buttonClass;
button.textContent = statusText;
button.setAttribute("data-user-name", userNameValue);
button.setAttribute("onclick", "goToPaySlip(this)");

const tdButton = document.createElement("td");
tdButton.appendChild(button);

// 나머지 데이터 추가
const tdUserName = document.createElement("td");
tdUserName.textContent = userNameValue;

const tdEnrollDate = document.createElement("td");
tdEnrollDate.textContent = enrollDate;

const tdPositionName = document.createElement("td");
tdPositionName.textContent = positionName;

const tdHeadName = document.createElement("td");
tdHeadName.textContent = headName;

const tdEmail = document.createElement("td");
tdEmail.textContent = email;

const tdSalary = document.createElement("td");
tdSalary.textContent = salary;

const tdPhone = document.createElement("td");
tdPhone.textContent = phone;

const tdGender = document.createElement("td");
tdGender.textContent = gender;

// 테이블 행에 추가
row.appendChild(tdButton);
row.appendChild(tdUserName);
row.appendChild(tdEnrollDate);
row.appendChild(tdPositionName);
row.appendChild(tdHeadName);
row.appendChild(tdEmail);
row.appendChild(tdSalary);
row.appendChild(tdPhone);
row.appendChild(tdGender);

// 최종적으로 테이블에 추가
tableBody.appendChild(row);













function renderEmployeeList(employees) {
const tableBody = document.getElementById("employeeTable");

if (!tableBody) {
console.error("🚨 employeeTable 요소가 존재하지 않습니다!");
return;
}

tableBody.innerHTML = ""; // 기존 데이터 초기화

employees.forEach(employee => {
console.log("📢 직원 데이터 확인:", employee);
console.log("📢 salary 값:", employee.salary);
console.log("📢 salary 타입 확인:", typeof employee.salary, employee.salary);

// 🚨 salary 기본값 설정
const salary = employee.salary ? `${employee.salary.toLocaleString()}원` : "❌ 없음";
console.log("📢 innerHTML로 들어가는 값:", `<td>${salary}</td>`);

const row = document.createElement("tr");

const tdSalary = document.createElement("td");
tdSalary.innerText = salary;  // 🚀 textContent → innerText 변경

row.appendChild(tdSalary);
tableBody.appendChild(row);
});
}